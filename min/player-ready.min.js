(()=>(n,o)=>{const d=()=>new Promise((async(n,o)=>{await SpinQuery.condition((()=>unsafeWindow),(()=>unsafeWindow.onLoginInfoLoaded!==undefined));if(unsafeWindow.onLoginInfoLoaded){unsafeWindow.onLoginInfoLoaded(n)}else{logError(new Error("utils.playerReady 失败"));console.error(`typeof onLoginInfoLoaded === ${typeof unsafeWindow.onLoginInfoLoaded}`);o()}}));const i=async()=>{if(unsafeWindow.aid){return unsafeWindow.aid}const n=await SpinQuery.condition((()=>{var n,o,d;return(n=unsafeWindow)===null||n===void 0?void 0:(o=n.player)===null||o===void 0?void 0:(d=o.getVideoMessage)===null||d===void 0?void 0:d.call(o)}),(n=>(n===null||n===void 0?void 0:n.aid)!==undefined)).catch((()=>{throw new Error("Cannot find aid")}));unsafeWindow.aid=n.aid;return n.aid};return{export:{playerReady:d,aidReady:i}}})();