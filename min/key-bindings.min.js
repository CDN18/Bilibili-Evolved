(()=>(e,t)=>{const n=["shift","alt","ctrl","meta"];const i=_.once((e=>{const t=document.URL.startsWith("https://www.bilibili.com/watchlater/");const i=document.URL.startsWith("https://www.bilibili.com/medialist/play/");const s={enable:true,bindings:e};document.body.addEventListener("keydown",(e=>{if(!s.enable){return}if(document.activeElement&&isTyping()){return}const o=e.key.toLowerCase();const r=dq(".bilibili-player-sphere-control");if(r!==null&&r.style.display!=="none"&&["w","a","s","d"].includes(o)){return}s.bindings.forEach((s=>{var o;if(s.keys.length===0){return}const r=n.some((t=>{const n=s.keys.includes(t);const i=s.keys.includes(`[${t}]`);if(i){return false}const o=e[t+"Key"];return n!==o}));if(r){return}const l=s.keys.filter((e=>!n.includes(e.toLowerCase()))).map((e=>e.toLowerCase()));const c=l.includes(e.key.toLowerCase())||l.includes(e.code.toLowerCase());if(!c){return}if((o=s===null||s===void 0?void 0:s.prevent)!==null&&o!==void 0?o:true){e.stopPropagation();e.preventDefault()}s.action({binding:s,isWatchlater:t,isMediaList:i,event:e})}))}));return s}));return{export:{loadKeyBindings:i}}})();